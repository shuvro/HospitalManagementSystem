<!--  containt tab for petient-->
<div class="row  nav-button-container fade in" role="tabpanel" id="petient">
    <div class="col-xs-12">
        <div class="noticeboard">
            <div class="noticeboard-header content-header">
                <i class="fa fa-info-circle" aria-hidden="true"></i> Manage Patient

            </div>
            <div class="noticeboard-body">
                <div>

                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs" role="tablist">
                        <li role="presentation" class="active"><a href="#patient-list" aria-controls="patient-list" role="tab" data-toggle="tab"><i class="fa fa-align-justify"></i> 
                            Patient List                    	</a></li>
							<!--<li role="presentation"><a href="#add-paitents" aria-controls="add-receptionist" role="tab" data-toggle="tab"><i class="fa fa-plus"></i>
                                                Add paitents                    	</a></li>-->
                        </ul>

                        <!-- Tab panes -->
                        <div class="tab-content">
                            <div role="tabpanel" class="tab-pane fade in active" id="patient-list">

                                <div class="table-responsive table-adjusment ">
                                <table class="table table-hover" id="datatab">
   <thead>
                                                    <tr>
                                                        <th style="display:none">ID</th>
														<th style="width: 100px;">Patient ID</th>
                                                        <th style="width: 200px;">Patient Name</th>
														<th style="width: 200px;">Name of Spouse</th>
														<th>Rank</th>
														<th>Phone No</th>
                                                        <th style="width: 50px">Age</th>
														<th>M. Status</th>
														
                                                        <th>Profile</th>
                                                        <th>Options</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    <?php foreach($patient as $row):?>
													<?php
                            
							
							                       if ($row['image_name'] == '')
                                                            $image_url = 'others/uploads/patient/doctor-2.jpg';
                                                        else
                                                            $image_url = 'others/uploads/patient/' . $row['image_name'];
                            ?>
                                                    <tr>
									
                                                        <th style="display:none"><?php echo $row['id'];?></th>
                                                        <th><?php echo $row['patient_id'];?></th>
                                                        <td><?php echo $row['name'];?></td>
                                                        <td><?php echo $row['name_of_spouse'];?></td>
                                                        <td><?php echo $row['rank'];?></td>
														<td><?php echo $row['phone_no'];?></td>
														<td><?php echo $row['age'];?></td>
														<td><?php echo $row['martial_status'];?></td>
														
														<td><img src="<?php echo base_url() . $image_url ?>"></td>
                                                        <td>
														<a href="<?php echo base_url();?>admin/patient_details/<?php echo $row['patient_id'];?>"><button class="btn btn-primary btn-sm"  type="button"><i class="fa fa-user" aria-hidden="true"></i></button> </a>
                                                         <!--<button class="btn btn-primary btn-sm" id="getdata" type="button"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></button>--> 

                                                                                </td>
                                                 </tr>
                                           <?php endforeach; ?>
                                         </tbody>


                                     </table>

                                
                            </div>

                        </div>
						<div role="tabpanel" class="tab-pane fade" id="add-paitents">
                                            <div class="table-adjusment">
                        <!--                                                <form class="form-horizontal">-->
                        <form action="<?php echo base_url(); ?>add/add_paitents" method="post" enctype="multipart/form-data">
                        <div class="form-group">
                            <label for="doc-name" class="control-label">paitents Name</label>
                            <div class=" ">
                                <input type="text" class="form-control dept-input" id="doc-name" placeholder="paitents Name" name="name">
                            </div>
                        </div>
						<div class="form-group">
                            <label for="doc-name" class="control-label">paitents Id</label>
                            <div class=" ">
                                <input type="text" class="form-control dept-input" id="doc-name" placeholder="paitents Id" name="patient_id">
                            </div>
                        </div>
						<div class="form-group">
                            <label for="doc-name" class="control-label">Date of Birth</label>
                            <div class=" ">
                                <input type="text" class="form-control dept-input" id="doc-name" placeholder="Date of Birth" name="dob">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="doc-email" class="control-label">Age</label>
                            <div class=" ">
                                <input type="text" class="form-control dept-input" id="doc-email" placeholder="Age" name="age">
                            </div>
                        </div>
						<div class="form-group">
                            <label for="doc-email" class="control-label">sex</label>
                            <div class=" ">
							<select id="doc-profile" type="text" class="form-control dept-input" name = "sex">
								<option value="" selected="selected" disabled="disabled">Select sex </option>
								
                                    <option value="male">Male</option>
									<option value="female">Female</option>
                                 
                                    </select>
                                
                            </div>
                        </div>
						<div class="form-group">
                            <label for="doc-email" class="control-label">Blood group</label>
                            <div class=" ">
							<select id="patient-blood-group" type="text" class="form-control dept-input" name="blood_group" >
							<option value="" selected="selected" disabled="disabled">Select Blood group </option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                                
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="doc-address" class="control-label">Martial status</label>
                            <div class=" ">
                                <select id="doc-profile" type="text" class="form-control dept-input" name = "martial_status">
								<option value="" selected="selected" disabled="disabled">Select Martial status</option>
								
                                    <option value="married">Married</option>
									<option value="unmarried">Unmarried</option>
                                 
                                    </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="doc-phone" class="control-label">Phone</label>
                            <div class=" ">
                                <input type="number" class="form-control dept-input" placeholder="Phone" name="phone" >
                            </div>
                        </div>
						<div class="form-group">
                            <label for="doc-phone" class="control-label">Email</label>
                            <div class=" ">
                                <input type="text" class="form-control dept-input" placeholder="Email" name="email" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="doc-department" class="control-label">Name of spouse</label>
                            <div class=" ">
                                 <input type="text" class="form-control dept-input" placeholder="Name of spouse" name="name_of_spouse" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="doc-profile" class="control-label">Parmanent address</label>
                                <div class=" ">
                                    <input type="text" class="form-control dept-input" id="doc-profile" placeholder="Parmanent address" name="parmanent_address">
                                </div>
                            </div>
							<div class="form-group">
                                <label for="doc-profile" class="control-label">present address</label>
                                <div class=" ">
                                    <input type="text" class="form-control dept-input" id="doc-profile" placeholder="present address" name="present_address">
                                </div>
                            </div>
							<div class="form-group">
                                <label for="doc-profile" class="control-label">Cne</label>
                                <div class=" ">
                                    <input type="text" class="form-control dept-input" id="doc-profile" placeholder="Cne" name="Cne">
                                </div>
                            </div>
							<div class="form-group">
                                <label for="doc-profile" class="control-label">Re</label>
                                <div class=" ">
                                    <input type="text" class="form-control dept-input" id="doc-profile" placeholder="Re" name="re">
                                </div>
                            </div>
							<div class="form-group">
                                <label for="doc-profile" class="control-label">Nok</label>
                                <div class=" ">
                                    <input type="text" class="form-control dept-input" id="doc-profile" placeholder="Nok" name="nok">
                                </div>
                            </div>
							<div class="form-group">
                                <label for="doc-profile" class="control-label">Rank</label>
                                <div class=" ">
                                    <input type="text" class="form-control dept-input" id="doc-profile" placeholder="Rank" name="rank">
                                </div>
                            </div>
							<div class="form-group">
                                <label for="doc-profile" class="control-label">Unit</label>
                                <div class=" ">
                                    <input type="text" class="form-control dept-input" id="doc-profile" placeholder="Unit" name="unit">
                                </div>
                            </div>
							<div class="form-group">
                                <label for="doc-profile" class="control-label">photo</label>
                                <div class="controls">
                                                            
                                                            <img id="preview_background" src=""  style="max-height:100px; max-width:200px;"/>
                                                           
                                                            <img src=""  style="max-height:100px; max-width:200px;"/>
                                                            <br>
                                                            <input type="file" id="photo_background" class="" name="photo" accept="image/*">
                                                        </div>
                            </div>

                            <div class="form-group">
                                <div class=" ">
                                    <button type="submit" class="btn btn-default">Add Doctor</button>
                                </div>
                            </div>
							</form>
                           
                        </div>

                                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

</div>

<div class="modal fade" id="view-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">

        <div class="modal-content">

            <form action="<?php echo base_url(); ?>AdminEdit/edit_Patient" method="post" enctype="multipart/form-data">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Edit Patient Details </h4>
            </div>
            <div class="modal-body">
                <div class="table-adjusment">


                    <input type="hidden" class="form-control dept-input" id="id" name="id" >


                    <div class="form-group">
                        <label for="patient-name" class="control-label">Name</label>
                        <div class=" ">
                            <input type="text" class="form-control dept-input" id="patient-name" placeholder=" Name" name="name" >
                        </div>
                    </div>
					<div class="form-group">
                        <label for="patient-name" class="control-label">Paitent Id</label>
                        <div class=" ">
                            <input type="text" class="form-control dept-input" id="patient-id" placeholder=" Name" name="patient_id" disabled="disabled" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="patient-email" class="control-label">Email</label>
                        <div class=" ">
                            <input type="text" class="form-control dept-input" id="patient-email" placeholder="Email" name="email" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="patient-address" class="control-label">Permanent Address</label>
                        <div class=" ">
                            <input type="text" class="form-control dept-input" id="patient-Permanent-address" placeholder="Address" name="Permanent_address" required>
                        </div>
                    </div>
					<div class="form-group">
                        <label for="patient-address" class="control-label">present Address</label>
                        <div class=" ">
                            <input type="text" class="form-control dept-input" id="patient-present-address" placeholder="Address" name="present_address" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="patient-phone" class="control-label">Phone</label>
                        <div class=" ">
                            <input type="tel" class="form-control dept-input" id="patient-phone" placeholder="Phone" name="phone">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="patient-occupation" class="control-label">Name of spouse</label>
                        <div class=" ">
                            <input type="text" class="form-control dept-input" id="patient-spouse" placeholder="Name of spouse" name="spouse" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="patient-marital-status" class="control-label">Marital Status</label>
                        <div class=" ">
                          <input type="text" class="form-control dept-input" id="patient-marital-status" placeholder="Marital Status" name="marital_status" >
                            
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="patient-sex" class="control-label">Sex</label>
                        <div class=" ">
                           <input type="text" class="form-control dept-input" id="patient-sex" placeholder="sex" name="sex" >
                            
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="patient-age" class="control-label">Age</label>
                        <div class=" ">
                            <input type="number" class="form-control dept-input" id="patient-age" name="age" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="patient-blood-group" class="control-label">Blood Group</label>
                        <div class=" ">
                           <input type="text" class="form-control dept-input" id="patient-blood-group" name="blood_group">
                            
                        </div>
                    </div>   
                    <div class="form-group">
                        <label for="patient-age" class="control-label">Cne</label>
                        <div class=" ">
                            <input type="text" class="form-control dept-input" id="patient-cne" name="cne">
                        </div>
                    </div>
					<div class="form-group">
                        <label for="patient-age" class="control-label">Nok</label>
                        <div class=" ">
                            <input type="text" class="form-control dept-input" id="patient-nok" name="nok">
                        </div>
                    </div>
					<div class="form-group">
                        <label for="patient-age" class="control-label">Rank</label>
                        <div class=" ">
                            <input type="text" class="form-control dept-input" id="patient-rank" name="rank">
                        </div>
                    </div>
					<div class="form-group">
                        <label for="patient-age" class="control-label">Unit</label>
                        <div class=" ">
                            <input type="text" class="form-control dept-input" id="patient-unit" name="unit">
                        </div>
                    </div>
					<div class="form-group">
                            <label for="doc-profile" class="control-label">Photo</label>
                            <div class=" ">
							<span id='modal_photo'></span>
                                <input type="file" class="form-control dept-input" id="patient-photo" placeholder="army-no" name="photo_name">
                            </div>
                        </div>
                    <div class="modal-footer">
                        <button type="" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary btn-modal">Save changes</button>
                    </div>
                   

                </div>

            </div>
           </form>

        </div>
    </div>
</div>

<script type="text/javascript">

        $(document).on('click','#getdata', function(){
            var edit_id= $(this).closest('tr').children()[0].textContent;
            var infoModal = $('#view-modal');
			//alert(edit_id);
       // $("#view-modal").modal("show");
       $.ajax({

        url: '<?php echo base_url();?>AdminGet/get_patients',
        data: {'edit_id': edit_id},
        type:'POST',
        dataType: 'json',

        error: function(){
            alert("Data not found");        
        },

        success:function(data){    
            $(".modal #id").val(data[0].id);
            $(".modal #patient-name").val(data[0].name);
			$(".modal #patient-id").val(data[0].patient_id);
            $(".modal #patient-email").val(data[0].email);
			$(".modal #patient-rank").val(data[0].rank);
			$(".modal #patient-spouse").val(data[0].name_of_spouse);
			$(".modal #patient-unit").val(data[0].unit);
            $(".modal #patient-Permanent-address").val(data[0].parmanent_address);
			$(".modal #patient-present-address").val(data[0].present_address);
            $(".modal #patient-sex").val(data[0].sex);
			$(".modal #patient-marital-status").val(data[0].martial_status);
            $(".modal #patient-phone").val(data[0].phone_no);
            $(".modal #patient-blood-group").val(data[0].blood_group);
			 $(".modal #patient-age").val(data[0].age);
			  $(".modal #patient-nok").val(data[0].nok);
			   $(".modal #patient-cne").val(data[0].cne);
			    $(".modal #patient-rank").val(data[0].rank);
			 if (data.image_name == '') {
                    data.image_name = 'default.png';
                }
              $("#modal_photo").html('<img style="border:1px solid #000000;" height="100" width="auto" src="' + '<?php echo base_url(); ?>others/uploads/patient/' + data[0].image_name + '">');
			
           // alert(edit_id);
           $("#view-modal").modal("show");

                          } // End of success function of ajax form
                          }); // End of ajax call
                          });

        


        


    </script>

